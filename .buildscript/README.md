# Builds / Automation

This directory contains various scripts used to automate Camera Kit builds, releases and publishing processes. Below is the description of various processes that involve this repository either directly through the scripts available here or indirectly by providing the upstream artifacts required for this repository to get updated.

### Here

- [camerakit-distribution-build](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-distribution-build) - builds, tests and creates an archive of the Camera Kit SDK with all platforms (Android, iOS) packaged together. This job is typically triggered on each commit to this repository and must succeed in order for a PR to be merged. 
- [camerakit-distribution-android-publish](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-distribution-android-publish) - builds the main Camera Kit Android sample app and publishes it to the [AppCenter](https://appcenter.ms/orgs/app-2q6u/apps/CameraKit-Sample-Partner) for internal testing / QA verification purposes. This job is typically triggered as a downstream job from a succesfull **camerakit-distribution-build** job.   
- [camerakit-distribution-ios-publish](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-distribution-ios-publish) -  builds the main Camera Kit iOS sample app and publishes it to the [AppCenter](https://appcenter.ms/orgs/app-2q6u/apps/CameraKit-Sample-Partner-iOS) for internal testing / QA verification purposes. This job is typically triggered as a downstream job from a succesfull **camerakit-distribution-build** job.
- [camerakit-distribution-publish-github](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-distribution-publish-github) - builds, tests and syncs changes to the "public" flavor of the Camera Kit SDK distribution to the GitHub repository: https://github.com/Snapchat/camera-kit-reference. This job is typically triggered manually, at the end of the Camera Kit SDK release process.
- [camerakit-distribution-publish-api-ref-docs-to-gcs](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-distribution-publish-api-ref-docs-to-gcs/) - gathers the necessary API reference docs, Android as well as iOS, and uploads them to a SnapKit owned GCS bucket which is used as a source of truth for the API reference docs available in https://docs.snap.com/api/home. Once the docs are uploaded to the GCS bucket, the Snap Docs repository requires an update to reference them, see an example [PR](https://github.sc-corp.net/Snapchat/snap-docs/pull/440).
- [camera-kit-distribution-cherry-picker](https://snapengine-builder.sc-corp.net/jenkins/job/camera-kit-distribution-cherry-picker) - automatically cherry-picks changes from one to another branch of this repository. This job is typically triggered when a PR lands in a release branch such as [`release/1.13.x`](https://github.sc-corp.net/Snapchat/camera-kit-distribution/tree/release/1.13.x) and changes are to be cherry-picked into the main (master) branch.
- [Jenkins Pipeline](./jenkins-pipeline/README.md) - contains workflow automation for Camera Kit release and other processes implemented through Jenkins pipeline framework.

### Elsewhere

- [camerakit-android-test](https://snapengine-builder-2.sc-corp.net/jenkins/job/camerakit-android-test/) - tests Camera Kit Android SDK release builds, triggered on every commit to master or Camera Kit release branches in the [camera-kit-android-sdk](https://github.sc-corp.net/Snapchat/camera-kit-android-sdk/) repo.
- [camerakit-android-version-update](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-android-version-update) - job to perform Camera Kit Android SDK version bump as well as branch promotion steps.
- [camerakit-ios-version-update](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-ios-version-update) - job to perform Camera Kit iOS SDK version bump as well as branch promotion steps.
- [camerakit-android-publish](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-android-publish) - builds and publishes Camera Kit SDK to either internal Maven repository on [GCS](https://console.cloud.google.com/storage/browser/snapengine-maven-publish/releases?project=snapchat-build-artifacts) or the public Maven Central repository via Sonatype Nexus [staging](https://oss.sonatype.org) repository.
- [camera-kit-ios-sdk](https://snapengine-builder.sc-corp.net/jenkins/job/camera-kit-ios-sdk) - builds and pushes Camera Kit iOS SDK to an internal [GCS](https://console.cloud.google.com/storage/browser/snapengine-maven-publish/camera-kit-ios/releases) bucket, triggered on every commit to master or Camera Kit release branches in the [iOS SDK](https://github.sc-corp.net/Snapchat/camera-kit-ios-sdk) repository.
- [camera-kit-ios-sdk-cocoapods-publish](https://snapengine-builder.sc-corp.net/jenkins/job/camera-kit-ios-sdk-cocoapods-publish) - publishes Camera Kit iOS SDK to the public Cocoapods repository, triggered manually throughout Camera Kit release process.
- [camerakit-android-app-size](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-android-app-size) - calculates an estimated binary size impact of the Camera Kit Android SDK to the end user apps. Triggered on every commit to master or Camera Kit release branches in the [Android](https://github.sc-corp.net/Snapchat/android) repo. The trends dashboard is available [here](https://lk.sc-corp.net/dashboards-next/5287?Commit+Branch=master&App+Platform=android&App+Name=camerakit&Target+Dates=2+week&Variant=release).
- [camera-kit-ios-app-size](https://snapengine-builder.sc-corp.net/jenkins/job/camera-kit-ios-app-size)  - calculates an estimated binary size impact of the Camera Kit iOS SDK to the end user apps. Triggered on every commit to master or Camera Kit release branches in the [iOS SDK](https://github.sc-corp.net/Snapchat/camera-kit-ios-sdk) repository. The trends dashboard is available [here](https://lk.sc-corp.net/dashboards-next/5287?Commit+Branch=master&App+Platform=ios&App+Name=camerakit&Target+Dates=2+week&Variant=release).
- [camerakit-android-lenscore-version-map](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-android-lenscore-version-map) - extracts the version name mappings between the Camera Kit, LensCore and Snapchat clients. The version name data is used for lens compatability [information](https://wiki.sc-corp.net/display/CP/Lenscore%2C+Lens+Studio+and+CameraKit+SDK+version+mapping).
- [camerakit-create-entitlement-signature](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-create-entitlement-signature) - creates custom signatures for the Camera Kit entitlements such as legal prompt bypass, for more info see [doc](https://docs.google.com/document/d/1hHUhZNxbZFIt8BPUIWCO4avslsciH2IrldtBCFVQank).
- [camerakit-generate-diagnostics-report](https://snapengine-builder.sc-corp.net/jenkins/job/camerakit-generate-diagnostics-report) - generates human readable reports from the Camera Kit diagnostics archive collected in Camera Kit powered apps, for more info see [doc](https://docs.google.com/document/d/1db3kqwpMzLMDqm4ZSD6iTCumCuAi40fVfbF3b4Jhk3M).
